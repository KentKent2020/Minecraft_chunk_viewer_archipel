!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.deck=n():r.deck=n()}(window,(function(){return function(r){var n={};function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=r,t.c=n,t.d=function(r,n,e){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n)return r;if(4&n&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var o in r)t.d(e,o,function(n){return r[n]}.bind(null,o));return e},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="",t(t.s=6)}([function(r,n){function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function e(n){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?r.exports=e=function(r){return t(r)}:r.exports=e=function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":t(r)},e(n)}r.exports=e},function(r,n){r.exports=function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}},function(r,n){function t(r,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}r.exports=function(r,n,e){return n&&t(r.prototype,n),e&&t(r,e),r}},function(r,n,t){const e=t(11),o={"||":function(r,n){return r||n},"&&":function(r,n){return r&&n},"|":function(r,n){return r|n},"^":function(r,n){return r^n},"&":function(r,n){return r&n},"==":function(r,n){return r==n},"!=":function(r,n){return r!=n},"===":function(r,n){return r===n},"!==":function(r,n){return r!==n},"<":function(r,n){return r<n},">":function(r,n){return r>n},"<=":function(r,n){return r<=n},">=":function(r,n){return r>=n},"<<":function(r,n){return r<<n},">>":function(r,n){return r>>n},">>>":function(r,n){return r>>>n},"+":function(r,n){return r+n},"-":function(r,n){return r-n},"*":function(r,n){return r*n},"/":function(r,n){return r/n},"%":function(r,n){return r%n}},i={"-":function(r){return-r},"+":function(r){return r},"~":function(r){return~r},"!":function(r){return!r}};function u(r,n){return r.map((function(r){return f(r,n)}))}async function a(r,n){return await Promise.all(r.map(r=>l(r,n)))}function c(r,n){const t=f(r.object,n);return r.computed?[t,t[f(r.property,n)]]:[t,t[r.property.name]]}async function s(r,n){const t=await l(r.object,n);return r.computed?[t,t[await l(r.property,n)]]:[t,t[r.property.name]]}function f(r,n){switch(r.type){case"ArrayExpression":return u(r.elements,n);case"BinaryExpression":return o[r.operator](f(r.left,n),f(r.right,n));case"CallExpression":let t,e,a;if("MemberExpression"===r.callee.type?(t=(a=c(r.callee,n))[0],e=a[1]):e=f(r.callee,n),"function"!=typeof e)return;return e.apply(t,u(r.arguments,n));case"ConditionalExpression":return f(r.test,n)?f(r.consequent,n):f(r.alternate,n);case"Identifier":return n[r.name];case"Literal":return r.value;case"LogicalExpression":return"||"===r.operator?f(r.left,n)||f(r.right,n):"&&"===r.operator?f(r.left,n)&&f(r.right,n):o[r.operator](f(r.left,n),f(r.right,n));case"MemberExpression":return c(r,n)[1];case"ThisExpression":return n;case"UnaryExpression":return i[r.operator](f(r.argument,n));default:return}}async function l(r,n){switch(r.type){case"ArrayExpression":return await a(r.elements,n);case"BinaryExpression":{const[t,e]=await Promise.all([l(r.left,n),l(r.right,n)]);return o[r.operator](t,e)}case"CallExpression":let t,e,u;if("MemberExpression"===r.callee.type?(t=(u=await s(r.callee,n))[0],e=u[1]):e=await l(r.callee,n),"function"!=typeof e)return;return await e.apply(t,await a(r.arguments,n));case"ConditionalExpression":return await l(r.test,n)?await l(r.consequent,n):await l(r.alternate,n);case"Identifier":return n[r.name];case"Literal":return r.value;case"LogicalExpression":{if("||"===r.operator)return await l(r.left,n)||await l(r.right,n);if("&&"===r.operator)return await l(r.left,n)&&await l(r.right,n);const[t,e]=await Promise.all([l(r.left,n),l(r.right,n)]);return o[r.operator](t,e)}case"MemberExpression":return(await s(r,n))[1];case"ThisExpression":return n;case"UnaryExpression":return i[r.operator](await l(r.argument,n));default:return}}r.exports={parse:e,eval:f,evalAsync:l,compile:function(r){return f.bind(null,e(r))},compileAsync:function(r){return l.bind(null,e(r))}}},function(r,n,t){var e=t(8),o=t(9),i=t(10);r.exports=function(r,n){return e(r)||o(r,n)||i()}},function(r,n){r.exports=function(r,n,t){return n in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}},function(r,n,t){(function(n){var e=t(12),o=("undefined"==typeof window?n:window).deck||{};if(!o.Layer)throw new Error("@deck.gl/core is not found");r.exports=Object.assign(o,e)}).call(this,t(7))},function(r,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(r){"object"==typeof window&&(t=window)}r.exports=t},function(r,n){r.exports=function(r){if(Array.isArray(r))return r}},function(r,n){r.exports=function(r,n){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)){var t=[],e=!0,o=!1,i=void 0;try{for(var u,a=r[Symbol.iterator]();!(e=(u=a.next()).done)&&(t.push(u.value),!n||t.length!==n);e=!0);}catch(r){o=!0,i=r}finally{try{e||null==a.return||a.return()}finally{if(o)throw i}}return t}}},function(r,n){r.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(r,n,t){!function(t){"use strict";var e=function(r,n){var t=new Error(r+" at character "+n);throw t.index=n,t.description=r,t},o={"-":!0,"!":!0,"~":!0,"+":!0},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},u=function(r){var n,t=0;for(var e in r)(n=e.length)>t&&r.hasOwnProperty(e)&&(t=n);return t},a=u(o),c=u(i),s={true:!0,false:!1,null:null},f=function(r){return i[r]||0},l=function(r,n,t){return{type:"||"===r||"&&"===r?"LogicalExpression":"BinaryExpression",operator:r,left:n,right:t}},p=function(r){return r>=48&&r<=57},y=function(r){return 36===r||95===r||r>=65&&r<=90||r>=97&&r<=122||r>=128&&!i[String.fromCharCode(r)]},h=function(r){return 36===r||95===r||r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57||r>=128&&!i[String.fromCharCode(r)]},v=function(r){for(var n,t,u=0,v=r.charAt,d=r.charCodeAt,b=function(n){return v.call(r,n)},g=function(n){return d.call(r,n)},m=r.length,x=function(){for(var r=g(u);32===r||9===r||10===r||13===r;)r=g(++u)},w=function(){var r,n,t=E();return x(),63!==g(u)?t:(u++,(r=w())||e("Expected expression",u),x(),58===g(u)?(u++,(n=w())||e("Expected expression",u),{type:"ConditionalExpression",test:t,consequent:r,alternate:n}):void e("Expected :",u))},O=function(){x();for(var n=r.substr(u,c),t=n.length;t>0;){if(i.hasOwnProperty(n)&&(!y(g(u))||u+n.length<r.length&&!h(g(u+n.length))))return u+=t,n;n=n.substr(0,--t)}return!1},E=function(){var r,n,t,o,i,a,c,s;if(a=j(),!(n=O()))return a;for(i={value:n,prec:f(n)},(c=j())||e("Expected expression after "+n,u),o=[a,i,c];(n=O())&&0!==(t=f(n));){for(i={value:n,prec:t};o.length>2&&t<=o[o.length-2].prec;)c=o.pop(),n=o.pop().value,a=o.pop(),r=l(n,a,c),o.push(r);(r=j())||e("Expected expression after "+n,u),o.push(i,r)}for(r=o[s=o.length-1];s>1;)r=l(o[s-1].value,o[s-2],r),s-=2;return r},j=function(){var n,t,e;if(x(),n=g(u),p(n)||46===n)return S();if(39===n||34===n)return P();if(91===n)return L();for(e=(t=r.substr(u,a)).length;e>0;){if(o.hasOwnProperty(t)&&(!y(g(u))||u+t.length<r.length&&!h(g(u+t.length))))return u+=e,{type:"UnaryExpression",operator:t,argument:j(),prefix:!0};t=t.substr(0,--e)}return!(!y(n)&&40!==n)&&A()},S=function(){for(var r,n,t="";p(g(u));)t+=b(u++);if(46===g(u))for(t+=b(u++);p(g(u));)t+=b(u++);if("e"===(r=b(u))||"E"===r){for(t+=b(u++),"+"!==(r=b(u))&&"-"!==r||(t+=b(u++));p(g(u));)t+=b(u++);p(g(u-1))||e("Expected exponent ("+t+b(u)+")",u)}return n=g(u),y(n)?e("Variable names cannot start with a number ("+t+b(u)+")",u):46===n&&e("Unexpected period",u),{type:"Literal",value:parseFloat(t),raw:t}},P=function(){for(var r,n="",t=b(u++),o=!1;u<m;){if((r=b(u++))===t){o=!0;break}if("\\"===r)switch(r=b(u++)){case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:n+=r}else n+=r}return o||e('Unclosed quote after "'+n+'"',u),{type:"Literal",value:n,raw:t+n+t}},C=function(){var n,t=g(u),o=u;for(y(t)?u++:e("Unexpected "+b(u),u);u<m&&(t=g(u),h(t));)u++;return n=r.slice(o,u),s.hasOwnProperty(n)?{type:"Literal",value:s[n],raw:n}:"this"===n?{type:"ThisExpression"}:{type:"Identifier",name:n}},k=function(r){for(var n,t,o=[],i=!1;u<m;){if(x(),(n=g(u))===r){i=!0,u++;break}44===n?u++:((t=w())&&"Compound"!==t.type||e("Expected comma",u),o.push(t))}return i||e("Expected "+String.fromCharCode(r),u),o},A=function(){var r,n;for(n=40===(r=g(u))?J():C(),x(),r=g(u);46===r||91===r||40===r;)u++,46===r?(x(),n={type:"MemberExpression",computed:!1,object:n,property:C()}):91===r?(n={type:"MemberExpression",computed:!0,object:n,property:w()},x(),93!==(r=g(u))&&e("Unclosed [",u),u++):40===r&&(n={type:"CallExpression",arguments:k(41),callee:n}),x(),r=g(u);return n},J=function(){u++;var r=w();if(x(),41===g(u))return u++,r;e("Unclosed (",u)},L=function(){return u++,{type:"ArrayExpression",elements:k(93)}},M=[];u<m;)59===(n=g(u))||44===n?u++:(t=w())?M.push(t):u<m&&e('Unexpected "'+b(u)+'"',u);return 1===M.length?M[0]:{type:"Compound",body:M}};v.version="0.3.4",v.toString=function(){return"JavaScript Expression Parser (JSEP) v"+v.version},v.addUnaryOp=function(r){return a=Math.max(r.length,a),o[r]=!0,this},v.addBinaryOp=function(r,n){return c=Math.max(r.length,c),i[r]=n,this},v.addLiteral=function(r,n){return s[r]=n,this},v.removeUnaryOp=function(r){return delete o[r],r.length===a&&(a=u(o)),this},v.removeAllUnaryOps=function(){return o={},a=0,this},v.removeBinaryOp=function(r){return delete i[r],r.length===c&&(c=u(i)),this},v.removeAllBinaryOps=function(){return i={},c=0,this},v.removeLiteral=function(r){return delete s[r],this},v.removeAllLiterals=function(){return s={},this},r.exports?n=r.exports=v:n.parse=v}()},function(r,n,t){"use strict";t.r(n);var e=t(4),o=t.n(e),i=t(5),u=t.n(i),a=t(1),c=t.n(a),s=t(2),f=t.n(s),l=t(0),p=t.n(l);function y(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!r)throw new Error("JSON conversion error ".concat(n))}function h(r,n){var t=function(r){if("string"==typeof r){var n=d[r];return n||(n=r.split("."),d[r]=n),n}return Array.isArray(r)?r:[r]}(n),e=r,o=!0,i=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value;e=v(e)?e[s]:void 0}}catch(r){i=!0,u=r}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}return e}function v(r){return null!==r&&"object"===p()(r)}var d={};var b=t(3),g=t.n(b),m={"-":function(r){return r}};function x(r,n){if(r in m)return m[r];var t,e=g.a.parse(r);return e.right||e.left||"Identifier"!==e.type?(!function r(n,t){if(Array.isArray(n))n.forEach((function(n){return r(n,t)}));else if(n&&"object"===p()(n))for(var e in n.type&&t(n),n)r(n[e],t)}(e,(function(r){if("CallExpression"===r.type)throw new Error("Function calls not allowed in JSON expressions")})),t=function(r){return g.a.eval(e,r)}):t=function(n){return h(n,r)},m[r]=t,t}var w="@@=",O="@@#",E="@@type",j=function(r){return r&&"object"===p()(r)},S=function(){function r(){c()(this,r),this.typeKey=E,this.log=console,this.classes={},this.reactComponents={},this.enumerations={},this.constants={},this.convertFunction=P,this.preProcessClassProps=function(r,n){return n},this.postProcessConvertedJson=function(r){return r};for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];for(var o=0,i=t;o<i.length;o++){var u=i[o];this._merge(u)}}return f()(r,[{key:"_merge",value:function(r){for(var n in r)switch(n){case"layers":case"views":Object.assign(this.classes,r[n]);break;default:if(n in this){var t=r[n];this[n]=j(this[n])?Object.assign(this[n],t):t}}}},{key:"validate",value:function(r){return y(!this.typeKey||"string"==typeof this.typeKey),y(j(this.classes)),!0}}]),r}();function P(r,n){return x(r)}function C(r){return r.replace(w,"")}function k(r,n){var t,e={};for(var o in r){var i=r[o];"string"==typeof(t=i)&&t.startsWith(w)&&(i=x(i=C(i))),i&&(e[o]=i)}return e}function A(r,n,t){var e=t.classes[r],o=t.reactComponents[r];if(!e&&!o){var i=t.log,u=JSON.stringify(n,null,0).slice(0,40);return i&&i.warn("JSON converter: No registered class of type ".concat(r,"(").concat(u,"...)  ")),null}return e?function(r,n,t){t.preProcessClassProps&&(n=t.preProcessClassProps(r,n,t));return n=k(n),new r(n)}(e,n,t):function(r,n,t){var e=t.React,o=n.children,i=void 0===o?[]:o;delete n.children,t.preProcessClassProps&&(n=t.preProcessClassProps(r,n,t));return n=k(n),e.createElement(r,n,i)}(o,n,t)}function J(r,n){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),t.push.apply(t,e)}return t}var L=function(r){return r&&"object"===p()(r)},M=function(){function r(n){c()(this,r),this.log=console,this.configuration={},this.onJSONChange=function(){},this.json=null,this.convertedJson=null,this.setProps(n)}return f()(r,[{key:"finalize",value:function(){}},{key:"setProps",value:function(r){"configuration"in r&&(this.configuration=r.configuration instanceof S?r.configuration:new S(r.configuration)),"onJSONChange"in r&&(this.onJSONChange=r.onJSONChange)}},{key:"convert",value:function(r){if(!r||r===this.json)return this.convertedJson;this.json=r;var n=function(r,n){return n=new S(n),N(r,"",n)}(function(r){return"string"==typeof r?JSON.parse(r):r}(r),this.configuration);return n=this.configuration.postProcessConvertedJson(n),this.convertedJson=n,n}},{key:"convertJson",value:function(r){return this.convert(r)}}]),r}();function N(r,n,t){return Array.isArray(r)?r.map((function(r,n){return N(r,String(n),t)})):function(r,n){var t=n.typeKey;return L(r)&&Boolean(r[t])}(r,t)?function(r,n){var t=n.typeKey,e=r[t],o=function(r){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(t,!0).forEach((function(n){u()(r,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):J(t).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))}))}return r}({},r);return delete o[t],o=U(o,n),A(e,o,n)}(r,t):L(r)?U(r,t):"string"==typeof r?function(r,n,t){if(r.startsWith(w)&&t.convertFunction)return r=r.replace(w,""),t.convertFunction(r,t);if(r.startsWith(O)){if(r=r.replace(O,""),t.constants[r])return t.constants[r];var e=r.split("."),i=o()(e,2),u=i[0],a=i[1];return t.enumerations[u][a]}return r}(r,0,t):r}function U(r,n){y(L(r));var t={};for(var e in r){var o=r[e];t[e]=N(o,0,n)}return t}function _(r,n){if(r===n)return!0;if("object"!==p()(r)||null===r||"object"!==p()(n)||null===n)return!1;if(Object.keys(r).length!==Object.keys(n).length)return!1;for(var t in r)if(!(t in n)||r[t]!==n[t])return!1;for(var e in n)if(!(e in r))return!1;return!0}t.d(n,"JSONConverter",(function(){return M})),t.d(n,"JSONConfiguration",(function(){return S})),t.d(n,"_convertFunctions",(function(){return k})),t.d(n,"_parseExpressionString",(function(){return x})),t.d(n,"_shallowEqualObjects",(function(){return _}))}])}));